<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>navigation</title>
    <!-- icon library -->
    <script src="https://kit.fontawesome.com/5e8eec8caf.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&family=Roboto&display=swap"
        rel="stylesheet">
    <style>
        #search button {
            width: 14%;
            padding: 10px;
            background: #51C9A6;
            color: white;
            font-size: 17px;
            border: 1px solid #EDEDED;
            border-left: none;
        }

        #search>input {
            padding: 10px;
            font-size: 17px;
            border: 1px solid #EDEDED;
            float: left;
            width: 80%;
        }

        .side_icon button {
            width: 5%;
            padding: 10px;
            color: #898989;
            font-size: 25px;
            border: none;
            background-color: white;
        }

        .navigation {
            display: flex;
            gap: 5%;
        }

        #search {
            width: 30%;
        }

        .side_icon {
            font-size: 12px;
        }

        .navigation img {
            height: 100%;
        }

        .side_icon>p {
            margin-top: 0%;
        }

        nav {
            position: fixed;
            width: 100%;
        }

        nav.scrolled {
            background: white;
        }

        #navigate {
            display: flex;
            flex-direction: column;
            font-family: 'Open Sans', sans-serif;
            font-family: 'Roboto', sans-serif;
        }

        .dropdown_button {
            background-color: #51C9A6;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown_content {
            display: none;
            position: fixed;
            background-color: white;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
            width: 100%;
            left: 200px;
            top: auto;
        }

        .dropdown_content a {
            color: black;
            text-decoration: none;
            display: block;
            margin-top: 0px;
            margin-bottom: 0px;
        }

        .dropdown_content a:hover {
            background-color: #f1f1f1;
        }

        .dropdown:hover .dropdown_content {
            display: flex;
        }

        .dropdown:hover .dropdown_button {
            background-color: white;
            color: black;
        }

        .navigation_bottom {
            background-color: #51C9A6;
            justify-content: center;
            gap: 1%;
        }

        .dropdown_box1,
        .dropdown_box2 {
            text-align: left;
            width: 300px;
        }

        .dropdown_box1 a,
        .dropdown_box2 a {
            text-decoration: none;
            color: black;
            font-weight: 500;
        }

        .dropdown_box3 {
            height: 40%;
        }

        .dropdown_box3 {
            display: inline-block;
            vertical-align: top;
        }

        .dropdown_box1>h3 {
            color: #51C9A6;
            text-decoration: under;
        }

        #shopping {
            width: 60%;
            height: 80%;
            font-family: 'Open Sans', sans-serif;
            font-family: 'Roboto', sans-serif;
            position: fixed;
            left: 250px;
            top: 50px;
            display: none;
            flex-direction: column;
            background-color: white;
            overflow: scroll;
            padding-right: 5px;
        }

        #shopping_cart td {
            min-width: 185px;
        }

        #add_to_cart {
            text-align: center;
            padding-top: 3%;
        }

        #shopping h2 {
            font-size: 20px;
        }

        .bottom_shopping_cart_button {
            display: none;
            flex-direction: row-reverse;
            gap: 20px;
        }

        #shopping_cart td {
            border-top: 1px solid #C9C4BD;
        }

        #shopping_cart>thead,
        h2>span {
            color: black;
        }

        .cart_button_color {
            background-color: #51C9A6;
            color: white;
        }

        .add_some_stuff {
            color: #51C9A6;
        }

        .bottom_shoping_cart {
            display: flex;
            justify-content: space-between;
        }

        #cart_total_table {
            display: none;
            flex-direction: column;
        }

        #add_more,
        #shopping_cart>thead {
            color: #C9C4BD;
        }

        #grand_total_cart td {
            border-top: 1px solid #C9C4BD;
        }

        #blur_background {
            position: fixed;
            display: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 555;
            cursor: not-allowed;
        
        }
    </style>
</head>

<body>
    <nav id="navigate">
        <ul class="navigation">
            <img src="https://static.oxinis.com/healthmug/image/healthmug/healthmug-logo.png">
            <form id="search">
                <input id="search_input" placeholder="Search Products">
                <button type="submit"><i class="fas fa-search"></i></button>
            </form>
            <div class="side_icon">
                <button><i class="fas fa-envelope"></i>
                </button>
                <p>Contact US</p>
            </div>
            <div class="side_icon">
                <button><i class="fas fa-wallet"></i>
                </button>
                <p>Sell with us</p>
            </div>
            <div class="side_icon">
                <button><i class="fas fa-user"></i>
                </button>
                <p>Sign In</p>
            </div>
            <div class="side_icon">
                <button id="side_cart"><i style="color: #51C9A6;" class="fas fa-shopping-cart"></i>
                </button>
            </div>
        </ul>
        <div class="navigation_bottom navigation">
            <div class="dropdown">
                <button class="dropdown_button">Alopathic</button>
                <div class="dropdown_content navigation">
                    <div class="dropdown_box1">
                        <h3>Categories</h3>
                        <a href="#">
                            <h3>Allopathic Medicines <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Tablets & Capsules <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Syrups & Suspensions <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Creams & Ointments <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Inhalers & Respules <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Oral Drops <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Eye & Ear Drops <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Nasal Drops & Spray <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Injections & Infusions <i class="fas fa-caret-right"></i></h3>
                        </a>
                    </div>
                    <div class="dropdown_box2">
                        <a href="#">
                            <h3>Top Brands <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">Sun Pharma</a>
                        <a href="#">Cipla</a>
                        <a href="#">Lupin</a>
                        <a href="#">Pfizer</a>
                        <a href="#">Abbott</a>
                        <a href="#">Mankind Pharma</a>
                        <a href="#">Dr. Reddys</a>
                        <a href="#">Glenmark Pharma</a>
                    </div>
                    <div class="dropdown_box3">
                        <img src="https://static.oxinis.com/healthmug/image/ad/allopathy-2.jpg" alt="alopathy">
                    </div>
                </div>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Nutrition</button>
                <div class="dropdown_content navigation">
                    <div class="dropdown_box1">
                        <a href="#">
                            <h3> Sports Nutrition <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            Proteins
                        </a>
                        <a href="#">
                            Fat Burner
                        </a>
                        <a href="#">
                            Weight Gainers
                        </a>
                        <a href="#">
                            Pre Post Workout
                        </a>
                        <a href="#">
                            Aminos
                        </a>
                        <a href="#">
                            Creatines
                        </a>
                        <a href="#">
                            <h3>Vitamin & Ditery Suppliment <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">
                            <h3>Organic Products <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">Organic Foods</a>
                        <a href="#">Coffee & Tea</a>
                        <a href="#">Ghee</a>
                        <a href="#">Atta/Flour</a>
                    </div>
                    <div class="dropdown_box2">
                        <a href="#">
                            <h3>Health Food & Drinks <i class="fas fa-caret-right"></i></h3>
                        </a>
                        <a href="#">Health Food & Drinks</a>
                        <a href="#">Honey, Sugar & Jaggery</a>
                        <a href="#">Oils</a>
                        <a href="#">Herbal & Vegetagle Juices</a>
                        <a href="#">Health Drinks</a>
                        <a href="#">Health Snacks &Bars</a>
                        <a href="#">Sugar Free</a>
                        <a href="#">Murabba</a>
                        <a href="#">Chawanprash</a>
                        <a href="#">Edible Seeds</a>
                        <a href="#">Green Teas</a>
                        <a href="#">DIgestives</a>
                    </div>
                    <div class="dropdown_box3">
                        <img src="https://static.oxinis.com/healthmug/image/ad/nutrition-2.jpg" alt="obesity">
                        <img src="https://static.oxinis.com/healthmug/image/ad/nutrition-3.jpg" alt="gastric">
                    </div>
                </div>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Disease</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Homeopathy</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Ayurveda</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Unani</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Personal</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Care</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Baby</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Sexual</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Wellness</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Fitness</button>
            </div>
            <div class="dropdown">
                <button class="dropdown_button">Consultation</button>
            </div>
        </div>
    </nav>


    <!-- cart -->


    <div id="shopping">
        <h3 style="text-align: right;color:#C9C4BD" onclick="cart_close()"><i class="fas fa-times"></i></h3>
        <h2><span>Shopping Cart</span><span id="add_more">(0 items)</span></h2>
        <br>
        <table id="shopping_cart">
            <thead>
                <tr>
                    <td>Item</td>
                    <td>Quantity</td>
                    <td>Price</td>
                    <td>
                        <form id="check_pincode">
                            <labe>Check for Delivery</labe><input type="number" id="pincode"
                                placeholder="Pincode"><button type="submit">Check</button>
                        </form>
                    </td>
                    <td>Sub Total</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="5" id="add_to_cart">
                        <img src="https://static.oxinis.com/healthmug/image/healthmug/cart.jpg" alt="shopping cart">
                        <br>
                        <h2>Your Cart is Empty</h2>
                        <h3 class="add_some_stuff">Add Some Stuff</h3>
                        <button class="cart_button_color" onclick="cart_close()">
                            <h3>Continue Shopping</h3>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="bottom_shoping_cart">
            <div>
                <h6>Safe Buy: 100% Money Back Guarantee</h6>
                <h6>Live Easy: 15 Days Easy Return Policy</h6>
                <h6>Top Notch: Genuine Products Guarantee</h6>
            </div>
            <div id="cart_total_table">
                <table>
                    <tr id="total">
                        <td>total:</td>
                    </tr>
                    <tr>
                        <td>Delivery Charge:</td>
                        <td>50</td>
                    </tr>
                    <tr id="grand_total_cart">
                        <td>
                            <h3>Grand total</h3>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="bottom_shopping_cart_button">
            <button class="cart_button_color">
                <h3>Place Order <i class="fas fa-angle-right"></i></h3>
            </button>
            <button onclick="cart_close()">
                <h3>Continue Shopping</h3>
            </button>
        </div>
    </div>

    <!-- bluring background -->

    <div id="blur_background"></div>
</body>

</html>
<script>
    var navbar = document.querySelector("nav");

    // for fixing scroll of nav bar
    window.onscroll = function () {
        //pageoffset or scroll
        if (window.pageYOffset > 250) {
            navbar.classList.add('scrolled')
        } else {
            navbar.classList.remove('scrolled')
        }
    }

    //search function

    document.getElementById("search").addEventListener("submit", search);
    //getting data from local storage
    var nutrition = JSON.parse(localStorage.getItem("nutrition"));
    var allopathy = JSON.parse(localStorage.getItem("allopyathi"));

    function search(e) {
        e.preventDefault();
        var ser = document.getElementById("search");
        console.log(ser.search_input.value);

        var items = [];
        for (var i = 0; i < nutrition.length; i++) {
            if (nutrition[i].prod_name.includes(ser.search_input.value))
                items.push(nutrition[i]);
        }
        for (i = 0; i < allopathy.length; i++) {
            if (allopathy[i].prod_name.includes(ser.search_input.value))
                items.push(allopathy[i]);
        }

        //display searched items
    }


    //cart

    document.getElementById("side_cart").addEventListener("click", popup)
    var cart = [];
    document.getElementById("side_cart").addEventListener("click",blur_on)

    function blur_on(){
        document.getElementById("blur_background").style.display="block";
    }

    function popup() {
        var shopping = document.getElementById("shopping");
        shopping.style.display = "flex";
        document.querySelectorAll().setAttribute("opacity", "0.1");
        document.getElementById("shopping").removeAttribute("opacity");

        if (cart.length != 0)
            shopping_cart(cart);
    }

    function shopping_cart(cart) {
        document.querySelector("#shopping_cart>tbody").innerHTML = "";
        cart.map(shopping_health);
        function shopping_health(item, index) {
            var tr = document.createElement("tr");
            var td1 = document.createElement("td");
            td1.textContent = item.prod_name;

            var td2 = document.createElement("td");
            var select = document.createElement("select");
            var option = document.createElement("option");
            var sel = "";
            for (var i = 1; i <= 10; i++) {
                sel = sel + "<option value='" + i + "'>" + i + "</option>";
            }
            select.innerHTML = sel;
            select.onchange = function () {
                sub_total_fun(index);
            }
            select.setAttribute("id", "cart_select" + index);
            td2.append(select);

            var td3 = document.createElement("td");
            td3.textContent = item.prod_price;

            var td4 = document.createElement("td");
            //add address of user from local storage
            // td4.textContent=

            var td5 = document.createElement("td");
            td5.textContent = item.prod_price;
            td5.setAttribute("id", "cart_sub_total" + index);

            tr.append(td1, td2, td3, td4, td5);
            document.querySelector("#shopping_cart>tbody").append(tr);
        }
        document.querySelector(".bottom_shopping_cart_button").style.display = "flex";
        var td1 = document.createElement("td");
        var total = 0;

        for (i = 0; i < cart.length; i++) {
            total = total + (+(cart[i].prod_price));
        }
        console.log(total);
        td1.textContent = total;
        td1.setAttribute("id", "total_cart");
        document.getElementById("total").append(td1);

        var td2 = document.createElement("td");
        td2.textContent = total >= 473 ? total : total + 50;
        td2.setAttribute("id", "grand_total_cart_td")
        document.getElementById("grand_total_cart").append(td2);

        document.getElementById("cart_total_table").style.display = "flex";
        document.getElementById("add_more").textContent = "(" + cart.length + " items)";
    }

    function sub_total_fun(index) {
        var cart_select = document.getElementById("cart_select" + index)
        var sub_total = (+(cart[index].prod_price)) * (+(document.getElementById("cart_select" + index).value));
        document.getElementById("cart_sub_total" + index).textContent = sub_total;

        var total = document.getElementById("total_cart").textContent;
        document.getElementById("total_cart").textContent = +(total) + sub_total - (+(cart[index].prod_price));

        var delivery
        if ((+(total) + sub_total - (+(cart[index].prod_price))) < 500)
            delivery = 0;
        else
            delivery = 50
        var grand = document.getElementById("grand_total_cart_td").textContent;
        document.getElementById("grand_total_cart_td").textContent = +(grand) + sub_total - (+(cart[index].prod_price)) - delivery;
    }

    function cart_close() {
        shopping.style.display = "";
    }
</script>